<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Import VUE  CDN-->
    <script src="https://unpkg.com/vue@next" defer></script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Import css  from styles.css-->
    <link rel="stylesheet" href="./styles.css">
    <!-- Import js from app.js-->
    <script src="app.js" defer></script>
    <title>Document</title>
</head>

<body>
    <section id="app">
        <header>
            <div id="header-left">
                <p>Header Esquerda</p>
            </div>
            <div id="header-center">
                <p v-if="logedin">{{user.name}} {{user.lastName}}</p>
                <p v-else>IoT APP</p>
            </div>
            <div id="header-right">
                <button id="login-button" v-if="!logedin" @click="showLogin">Login</button>
                <button id="logout-button" v-else @click="logout">Logout</button>
                <button id="register-button" v-if="!logedin" @click="showRegister">Register</button>
            </div>
        </header>
        <div id="mode-selector" v-if="logedin">
            <button id="mode-selector-button" @click='changeModeDevices'>Devices</button>
            <button id="mode-selector-button" @click='changeModeGroups'>Groups</button>
        </div>
        <section id="userContent" v-if="logedin">
            <ul>
                <li v-for="(device, key) in devices" v-if="deviceMode && logedin">
                    <div class="device-name">
                        <p>{{device.name}}</p>
                        <p>DEV: {{key}}</p>
                    </div>
                    <div class="device-status">
                        <p>{{device.status}}</p>
                    </div>
                    <div class="device-actions">
                        <button @click="changeDeviceStatus(key)">On</button>
                        <button @click="changeDeviceStatus(key)">Off</button>
                    </div>
                </li>
                <li v-for="(group, key) in groups" v-if="groupMode && logedin">
                    <div class="group-name">
                        <p>{{group.name}}</p>
                        <p>{{key}}</p>
                    </div>
                    <div class="group-status">
                        <p>{{group.status}}</p>
                    </div>
                    <div class="group-actions">
                        <button @click="changeGroupStatus(key)">On</button>
                        <button @click="changeGroupStatus(key)">Off</button>
                    </div>
                </li>
            </ul>
            <div id="mode-selector" v-if="logedin">
                <button id="mode-selector-button" @click="addDeviceMode = !addDeviceMode">Add Devices</button>
                <button id="mode-selector-button" @click="addGroupMode = !addGroupMode">Add Groups</button>
            </div>
            <section id="add-section">
                <section id="register-device" v-if="addDeviceMode">
                    <form action="submitNewDevice">
                        <input type="text" name="deviceName" placeholder="Device Name">
                        <input type="text" name="deviceStatus" placeholder="Device Status">
                        <input type="submit" value="Submit">
                    </form>
                </section>



                <section id="register-group" v-if="addGroupMode">
                    <form action="submitNewGroup">
                        <input type="text" name="groupName" placeholder="Group Name">
                        <input type="text" name="groupStatus" placeholder="Group Status">
                        <input type="submit" value="Submit">
                    </form>
                </section>

            </section>
        </section>
        <section id="register-form" v-if="registerMode">
            <div>
                <label>Register</label>
                <input v-model="user.email" placeholder="User Email">
                <input v-model="user.password" placeholder="User Password">
                <button @click="register" value="Submit">

            </div>
        </section>
        <section id="register-form" v-if="loginMode">
            <div>
                <label>Login</label>
                <input v-model="user.email" placeholder="User Email">
                <input v-model="user.password" placeholder="User Password" type="password">
                <button @click="submitLogin" value="Submit">Submit</button>
                <p v-if="wrongCredentials" style="color: red;">Password Ou user errados</p>
            </div>
        </section>



    </section>
</body>

</html>